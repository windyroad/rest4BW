<?xml version="1.0" encoding="UTF-8"?>
<pd:ProcessDefinition xmlns:pd="http://xmlns.tibco.com/bw/process/2003" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:pfx="http://windyroad.org/wr-http.xsd">
    <xsd:import namespace="http://windyroad.org/wr-http.xsd" schemaLocation="/rest4BW/Private/Schemas/HttpConnection.xsd"/>
    <pd:name>client/Example REST Client - request and response.process</pd:name>
    <pd:startName>Start</pd:startName>
    <pd:startX>80</pd:startX>
    <pd:startY>64</pd:startY>
    <pd:returnBindings/>
    <pd:endName>End</pd:endName>
    <pd:endX>741</pd:endX>
    <pd:endY>64</pd:endY>
    <pd:errorSchemas/>
    <pd:processVariables/>
    <pd:targetNamespace>http://xmlns.example.com/1338204316525</pd:targetNamespace>
    <pd:activity name="GET request">
        <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
        <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
        <pd:x>230</pd:x>
        <pd:y>64</pd:y>
        <config>
            <element ref="pfx:request"/>
        </config>
        <pd:inputBindings>
            <pfx:request>
                <pfx:Method>GET</pfx:Method>
                <pfx:RequestURI>/ApplicationContext/SomePath/Some Resource.txt?q=some search term&amp;key=value</pfx:RequestURI>
                <pfx:HTTPVersion>HTTP/1.1</pfx:HTTPVersion>
                <pfx:Command>/ApplicationContext/SomePath/Some Resource.txt</pfx:Command>
                <pfx:QueryString>q=some search term&amp;key=value</pfx:QueryString>
                <pfx:Header>GET /ApplicationContext/SomePath/Some Resource.txt?q=some search term&amp;key=value HTTP/1.1hostUnexpected : localhostUnexpected :8080
user-agentUnexpected : Mozilla/5.0 (X11Unrecognized token UbuntuUnrecognized token Linux i686Unrecognized token rvUnexpected :12.0) Gecko/20100101 Firefox/12.0
acceptUnexpected : text/html,application/xhtml+xml,application/xmlUnrecognized tokenq=0.9,*/*Unrecognized tokenq=0.8
accept-languageUnexpected : en-us,enUnrecognized tokenq=0.5
accept-encodingUnexpected : gzip, deflate
connectionUnexpected : keep-alive
if-modified-sinceUnexpected : 2012-05-28T21Unexpected :33Unexpected :03.914+10Unexpected :00</pfx:Header>
                <pfx:Protocol>HTTP</pfx:Protocol>
                <pfx:Port>8080</pfx:Port>
                <pfx:Headers>
                    <pfx:Accept>text/html,application/xhtml+xml,application/xmlUnrecognized tokenq=0.9,*/*Unrecognized tokenq=0.8</pfx:Accept>
                    <pfx:Accept-Encoding>gzip, deflate</pfx:Accept-Encoding>
                    <pfx:Connection>keep-alive</pfx:Connection>
                    <pfx:host>
                        <xsl:value-of select="'localhost:8080'"/>
                    </pfx:host>
                    <pfx:If-Modified-Since>
                        <xsl:value-of select="'2012-05-28T21:33:03.914+10:00'"/>
                    </pfx:If-Modified-Since>
                    <pfx:ETag>
                        <xsl:value-of select="'ETAG1234'"/>
                    </pfx:ETag>
                </pfx:Headers>
                <pfx:Context>
                    <pfx:RemoteAddress>127.0.0.1</pfx:RemoteAddress>
                </pfx:Context>
            </pfx:request>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Handle error response">
        <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
        <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
        <pd:description>N.B. This is currently a NOOP process.</pd:description>
        <pd:x>567</pd:x>
        <pd:y>164</pd:y>
        <config>
            <element/>
        </config>
        <pd:inputBindings/>
    </pd:activity>
    <pd:activity name="Handle response">
        <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
        <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
        <pd:description>N.B. This is currently a NOOP process.</pd:description>
        <pd:x>567</pd:x>
        <pd:y>64</pd:y>
        <config>
            <element/>
        </config>
        <pd:inputBindings/>
    </pd:activity>
    <pd:activity name="Send HTTP Request">
        <pd:type>com.tibco.plugin.http.client.HttpRequestActivity</pd:type>
        <pd:resourceType>httppalette.httpRequest</pd:resourceType>
        <pd:x>403</pd:x>
        <pd:y>64</pd:y>
        <config>
            <inputOutputVersion>5.3.0</inputOutputVersion>
            <newMimeSupport>true</newMimeSupport>
            <serverhost>127.0.0.1</serverhost>
            <serverport>8123</serverport>
            <useSsl>false</useSsl>
            <ns0:ssl xmlns:ns0="http://www.tibco.com/xmlns/aemeta/services/2002"/>
            <acceptRedirects>true</acceptRedirects>
            <InputHeaders>
                <xsd:element name="root">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="Accept" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Accept-Charset" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Accept-Encoding" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Content-Type" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Cookie" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Pragma" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="host" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="If-Modified-Since" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="ETag" type="xsd:string" minOccurs="0"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </InputHeaders>
            <OutputHeaders>
                <xsd:element name="root">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="Allow" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Cache-Control" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Last-Modified" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Expires" type="xsd:string"/>
                            <xsd:element name="Content-Type" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Content-Length" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Content-Encoding" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Date" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Location" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Set-Cookie" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Pragma" type="xsd:string" minOccurs="0"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </OutputHeaders>
        </config>
        <pd:inputBindings>
            <xsl:choose>
                <xsl:when test="$GET-request/pfx:request">
                    <xsl:for-each select="$GET-request/pfx:request">
                        <RequestActivityInput>
                            <xsl:if test="pfx:Port">
                                <Port>
                                    <xsl:value-of select="pfx:Port"/>
                                </Port>
                            </xsl:if>
                            <xsl:if test="pfx:Method">
                                <Method>
                                    <xsl:value-of select="pfx:Method"/>
                                </Method>
                            </xsl:if>
                            <xsl:if test="pfx:RequestURI">
                                <RequestURI>
                                    <xsl:value-of select="pfx:RequestURI"/>
                                </RequestURI>
                            </xsl:if>
                            <xsl:if test="pfx:PostData">
                                <PostData>
                                    <xsl:value-of select="pfx:PostData"/>
                                </PostData>
                            </xsl:if>
                            <xsl:if test="pfx:QueryString">
                                <QueryString>
                                    <xsl:value-of select="pfx:QueryString"/>
                                </QueryString>
                            </xsl:if>
                            <xsl:for-each select="pfx:Headers">
                                <Headers>
                                    <xsl:if test="pfx:Accept">
                                        <Accept>
                                            <xsl:value-of select="pfx:Accept"/>
                                        </Accept>
                                    </xsl:if>
                                    <xsl:if test="pfx:Accept-Charset">
                                        <Accept-Charset>
                                            <xsl:value-of select="pfx:Accept-Charset"/>
                                        </Accept-Charset>
                                    </xsl:if>
                                    <xsl:if test="pfx:Accept-Encoding">
                                        <Accept-Encoding>
                                            <xsl:value-of select="pfx:Accept-Encoding"/>
                                        </Accept-Encoding>
                                    </xsl:if>
                                    <xsl:if test="pfx:Content-Type">
                                        <Content-Type>
                                            <xsl:value-of select="pfx:Content-Type"/>
                                        </Content-Type>
                                    </xsl:if>
                                    <xsl:if test="pfx:Cookie">
                                        <Cookie>
                                            <xsl:value-of select="pfx:Cookie"/>
                                        </Cookie>
                                    </xsl:if>
                                    <xsl:if test="pfx:Pragma">
                                        <Pragma>
                                            <xsl:value-of select="pfx:Pragma"/>
                                        </Pragma>
                                    </xsl:if>
                                    <xsl:if test="pfx:host">
                                        <host>
                                            <xsl:value-of select="pfx:host"/>
                                        </host>
                                    </xsl:if>
                                    <xsl:if test="pfx:If-Modified-Since">
                                        <If-Modified-Since>
                                            <xsl:value-of select="pfx:If-Modified-Since"/>
                                        </If-Modified-Since>
                                    </xsl:if>
                                    <xsl:if test="pfx:ETag">
                                        <ETag>
                                            <xsl:value-of select="pfx:ETag"/>
                                        </ETag>
                                    </xsl:if>
                                </Headers>
                            </xsl:for-each>
                        </RequestActivityInput>
                    </xsl:for-each>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:for-each select="$POST-multipart/pfx:request">
                        <RequestActivityInput>
                            <xsl:if test="pfx:Port">
                                <Port>
                                    <xsl:value-of select="pfx:Port"/>
                                </Port>
                            </xsl:if>
                            <xsl:if test="pfx:Method">
                                <Method>
                                    <xsl:value-of select="pfx:Method"/>
                                </Method>
                            </xsl:if>
                            <xsl:if test="pfx:RequestURI">
                                <RequestURI>
                                    <xsl:value-of select="pfx:RequestURI"/>
                                </RequestURI>
                            </xsl:if>
                            <xsl:if test="pfx:PostData">
                                <PostData>
                                    <xsl:value-of select="pfx:PostData"/>
                                </PostData>
                            </xsl:if>
                            <xsl:if test="pfx:QueryString">
                                <QueryString>
                                    <xsl:value-of select="pfx:QueryString"/>
                                </QueryString>
                            </xsl:if>
                            <xsl:for-each select="pfx:Headers">
                                <Headers>
                                    <xsl:if test="pfx:Accept">
                                        <Accept>
                                            <xsl:value-of select="pfx:Accept"/>
                                        </Accept>
                                    </xsl:if>
                                    <xsl:if test="pfx:Accept-Charset">
                                        <Accept-Charset>
                                            <xsl:value-of select="pfx:Accept-Charset"/>
                                        </Accept-Charset>
                                    </xsl:if>
                                    <xsl:if test="pfx:Accept-Encoding">
                                        <Accept-Encoding>
                                            <xsl:value-of select="pfx:Accept-Encoding"/>
                                        </Accept-Encoding>
                                    </xsl:if>
                                    <xsl:if test="pfx:Content-Type">
                                        <Content-Type>
                                            <xsl:value-of select="pfx:Content-Type"/>
                                        </Content-Type>
                                    </xsl:if>
                                    <xsl:if test="pfx:Cookie">
                                        <Cookie>
                                            <xsl:value-of select="pfx:Cookie"/>
                                        </Cookie>
                                    </xsl:if>
                                    <xsl:if test="pfx:Pragma">
                                        <Pragma>
                                            <xsl:value-of select="pfx:Pragma"/>
                                        </Pragma>
                                    </xsl:if>
                                    <xsl:if test="pfx:host">
                                        <host>
                                            <xsl:value-of select="pfx:host"/>
                                        </host>
                                    </xsl:if>
                                    <xsl:if test="pfx:If-Modified-Since">
                                        <If-Modified-Since>
                                            <xsl:value-of select="pfx:If-Modified-Since"/>
                                        </If-Modified-Since>
                                    </xsl:if>
                                    <xsl:if test="pfx:ETag">
                                        <ETag>
                                            <xsl:value-of select="pfx:ETag"/>
                                        </ETag>
                                    </xsl:if>
                                </Headers>
                            </xsl:for-each>
                        </RequestActivityInput>
                    </xsl:for-each>
                </xsl:otherwise>
            </xsl:choose>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="POST multipart">
        <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
        <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
        <pd:x>232</pd:x>
        <pd:y>150</pd:y>
        <config>
            <element ref="pfx:request"/>
        </config>
        <pd:inputBindings>
            <pfx:request>
                <pfx:Method>POST</pfx:Method>
                <pfx:RequestURI>/submitform</pfx:RequestURI>
                <pfx:PostData>-----------------------------9849436581144108930470211272
Content-Disposition: form-data; name="syx_sid"

6BBgsx9DXFAoNN0WnEyHZDn2weVnEj
-----------------------------9849436581144108930470211272
Content-Disposition: form-data; name="syx_sov"

vzum5e
-----------------------------9849436581144108930470211272
Content-Disposition: form-data; name="syx_efi"


-----------------------------9849436581144108930470211272
Content-Disposition: form-data; name="u_s4w_4607"

test
-----------------------------9849436581144108930470211272
Content-Disposition: form-data; name="u_s4w_4608"

john@doe.com
-----------------------------9849436581144108930470211272
Content-Disposition: form-data; name="u_s4w_4609"

test
-----------------------------9849436581144108930470211272
Content-Disposition: form-data; name="submit"

Continue »
-----------------------------9849436581144108930470211272--</pfx:PostData>
                <pfx:Headers>
                    <pfx:Content-Type>multipart/form-data; boundary=---------------------------9849436581144108930470211272</pfx:Content-Type>
                    <pfx:ETag>ETAG1234</pfx:ETag>
                </pfx:Headers>
                <pfx:Context>
                    <pfx:RemoteAddress>127.0.0.1</pfx:RemoteAddress>
                </pfx:Context>
            </pfx:request>
        </pd:inputBindings>
    </pd:activity>
    <pd:transition>
        <pd:from>GET request</pd:from>
        <pd:to>Send HTTP Request</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Send HTTP Request</pd:from>
        <pd:to>Handle response</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Handle response</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Send HTTP Request</pd:from>
        <pd:to>Handle error response</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-26368</pd:lineColor>
        <pd:conditionType>error</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Handle error response</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Start</pd:from>
        <pd:to>POST multipart</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>POST multipart</pd:from>
        <pd:to>Send HTTP Request</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Start</pd:from>
        <pd:to>GET request</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>false()</pd:xpath>
    </pd:transition>
    <pd:label>
        <pd:name>Label</pd:name>
        <pd:description> This is an example implementation of a REST client.
 This process is a simple example of a GET invocation on the REST service.</pd:description>
        <pd:x>318</pd:x>
        <pd:y>247</pd:y>
        <pd:width>506</pd:width>
        <pd:height>50</pd:height>
        <pd:fontColor>-16777216</pd:fontColor>
        <pd:color>-6697729</pd:color>
        <pd:type>solid</pd:type>
        <pd:thickness>0</pd:thickness>
        <pd:fade>true</pd:fade>
    </pd:label>
</pd:ProcessDefinition>